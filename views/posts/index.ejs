<%- include("../partials/header") %>
<body>
    <div id="post-page-title">
        <div id="title-cover">
        </div>
        <h1>FIX YOUR CODE</h1>
        <div id="down-div"><i id="down-arrow" class="fas fa-angle-double-down"></i></div>
    </div>
    <%- include("../partials/navbar.ejs", {
        whichPage: "post-index-page"
    }) %>
    <div id="all-posts">
        <h1>ALL POSTS</h1>
        <% if(posts.length === 0) { %>
            <h1 id="post-empty">There's nothing here.</h1>
        <% } %>
        <% for(let i = 0; i < posts.length; i++) { %>
            <div class="posts">
                <div class="title">
                    <a href="/posts/<%= posts[i]._id %>">
                        <% if(posts[i].title.length > 40) { %>
                            <%= posts[i].title.substring(0, 40) %>...
                        <% } else { %>
                            <%= posts[i].title %>
                        <% } %>
                    </a>
                </div>
                <div class="description">
                    <div>
                        Posted By <a href="/users/<%= posts[i].creator.userID %>"><%= posts[i].creator.displayName %></a>
                    </div>
                    <div>
                        <small><%= posts[i].language %></small>
                    </div>
                    <div>
                        <small><%= posts[i].comments.length %> comment<%= posts[i].comments.length === 1 ? "" : "s" %></small>
                    </div>
                </div>
            </div>
        <% } %>
    </div>
</body>
<script>
    const downArrow = document.querySelector("#down-arrow");
    const postTitleDiv = document.querySelector("#post-page-title");
    const navBar = document.querySelector(".nav");

    downArrow.addEventListener("click", () => {
        scrollTo(0, postTitleDiv.scrollHeight-navBar.offsetHeight);
    })
</script>
</html>